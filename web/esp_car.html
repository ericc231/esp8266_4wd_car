<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <script>
//        var addr = location.hostname;
        var addr = '192.168.2.37';

        var connection = new WebSocket('ws://' + addr + ':81/', ['arduino']);
        connection.onopen = function () {
            connection.send('Connect ' + new Date());
        };
        connection.onerror = function (error) {
            console.log('WebSocket Error ', error);
        };
        connection.onmessage = function (e) {
            console.log('Server: ', e.data);
        };
        function sendRGB() {
            var sp = parseInt(document.getElementById('speed').value);
            speed = pad(sp);
            console.log('speed: ', speed);
        }

        function pad(num) {
            var s = "00" + num;
            return s.substr(s.length - 3);
        }

        var speed = "255";

        var driveForward = false;
        var driveBack = false;
        var driveLeft = false;
        var driveRight = false;

        function onForward() {
            driveForward = true;
            connection.send('#f' + speed + 'f' + speed);
        }

        function onBack() {
            driveBack = true;
            connection.send('#b' + speed + 'b' + speed);
        }

        function onLeft() {
            driveLeft = true;
            connection.send('#b' + speed + 'f' + speed);
        }

        function onRight() {
            driveRight = true;
            connection.send('#f' + speed + 'b' + speed);
        }

        function onStop() {
            driveForward = false;
            driveBack = false;
            driveLeft = false;
            driveRight = false;
            connection.send('#f000b000');
        }


    </script>
</head>
<body>
Wi-Fi Car
<br><br>
Speed: <input id="speed" type="range" min="0" max="255" step="1" onchange="sendRGB();">
<br>

<table border="0">
    <tr>
        <td colspan="3">
            <button type="button" onmousedown="javascript: onForward();" onmouseup="javascript: onStop();">Forward
            </button>
        </td>
    </tr>
    <tr>
        <td>
            <button type="button" onmousedown="javascript: onLeft();" onmouseup="javascript: onStop();">Left</button>
        </td>
        <td>
            &nbsp;
        </td>
        <td>
            <button type="button" onmousedown="javascript: onRight();" onmouseup="javascript: onStop();">Right</button>
        </td>
    </tr>
    <tr>
        <td colspan="3">
            <button type="button" onmousedown="javascript: onBack();" onmouseup="javascript: onStop();">Backward
            </button>
        </td>
    </tr>
</table>


</body>
</html>